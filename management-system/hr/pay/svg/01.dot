digraph {
    node [shape="box", style="rounded,filled", fillcolor="aquamarine"]
        start[label="开始"];
        end[label="结束"];

    node [shape="box", style="rounded,filled", fillcolor="bisque"]
        s1[label="列出所有该教师授课的上课情况(按次)"];
        s2[label="选择需要计算课时费的上课情况\n生成上课情况列表(按次)"];
        s3_a[label="提成比例=高中冲刺提成比例"];
        s3_b[label="提成比例=普通高中课程提成比例"];
        s4[label="从上课情况列表中取出一次上课境况"];
        s5[label="读取这次上课情况中的应到学生列表"];
        s6[label="从应到学生列表中取出一个学生信息"];
        s7_a[label="从该学生得到的收入=\n该学生这次上课的学费x提成比例"];
        s7_b[label="从该学生得到的收入=一个固定值"];
        s8[label="将从该学生得到的收入\n计入当前班级的课时费"];
    
    node [shape="diamond", style="rounded,filled", fillcolor="beige"]
        c1[label="是高中冲刺班?"];
        c2[label="上课情况列表(按次)为空?"];
        c3[label="应到学生列表是否为空?"];
        c4[label="学生是高中生?"];

    start -> s1 -> s2 -> c1;
    c1 -> s3_a[label="是"];
    c1 -> s3_b[label="否"];
    s3_a -> c2;
    s3_b -> c2;
    c2 -> s4[label="否"];
    c2 -> end[label="是"];
    s4 -> s5 -> c3;
    c3 -> s6[label="否"];
    c3 -> c2[label="是"];
    s6 -> c4;
    c4 -> s7_a[label="是"];
    c4 -> s7_b[label="否"];
    s7_a -> s8;
    s7_b -> s8;
    s8 -> c3;

    {rank=same; s8 end}
}
